

\subsection{Alkuperäinen ominaisuus ja parannus kohteet}

%toinen kappale pitää muokata

% ominaisuuden yhteenveto pitää lisätä tekstiä ellei se siirretä kokonaan koko yhteenvetoon



Sovelluksen  "Progressio"{} sivulla om ominaisuus, 
joka antaa mahdollisuuden käyttäjälle seurata ja tellettaa hänelle annettua "mitattavaa"{} arvoa.
Kuvassa \nextImageCount {} näkyy on progressio sivu, 
ja siitä Käyttäjä pystyy valitsemaan miltä päivältä arvo on otettu ja mikä itse arvo on.
\medskip

\bigskip
\includegraphics[width =15cm]{src/public/progressiosingle.png}\\
Kuva \getImgCount {}. Progressio sivu (tarvitsee paremman kuvan)
\medskip


% pitää muokata sanoitusta että se olisi järkevä

Kuvassa \theimgCounter {} mitattava arvo on paino. 
% 
Tällä hetkellä käyttäjälle voi määrittää vain yhden mitattavan arvon, jota seurata.
Sain tehtäväksi laajentaa ominaisuutta siten että käyttäjälle voi määrittää useamman mitattavan arvon.
\medskip


Käyttäjän mitattavan arvon suure säilytetään käyttäjän profiilissa merkkijonona. 
Kuvassa \nextImageCount {} on esimerkki käyttäjä profiilin skeemasta JSON muodossa.
Yksittäinen "measurableThing"{} ominaisuus ei ole riittävä useamman mitattavan arvon seurantaan, joten se pitäisi vaihtaa.
%mainitse paremmin mongo nosql dokumentti
Koska käytössä on nosql dokumentti voimme vaihtaa "measurableThing"{} merkkijonon, "measurableThings"{} merkkijono listaan.
\medskip


\bigskip
imageofthething\\
Kuva \getImgCount {}. Käyttäjä profiilin skeema
\medskip













\subsection{Ominaisuuden totetus}


\subsubsection{Käyttäjä profiili skeeman migraatio}



Käyttänän mitattavan arvon vaihtaminen listaan vaatii käyttäjän skeeman muutoksen.
MongoDB:n NoSql dokumentti ei määritä tiukkaa skeemaa, joten käyttäjien skeemat voivat olla eriävät.
Skeeman muutos vaatii jokaisen käyttäjän profiilin muokkaamista haluttuun muotoon.
Käyttäjä profiilin skeeman muutos pitää tehdä kaikille aktiivisille käyttäjille, käyttäjän luontia pitää myös muokata siten, 
että uudet käyttäjän alkaisivat käyttämään uutta skeemaa.
\medskip

MongoDB antaa tallettaa mitä tahansa sen tietokantaan, joten projektissa on omat tyyppitarkastukset MongoDB rajapinnoissa, 
ettei virheelliset kirjoitus ohjeet talleta mitään tietokantaa.
%api muutos 
Nämä rajapinta tyyppitarkastukset pitää myös muokata sopimaan uuteen skeemaan.
\medskip

Migraatio tehdään kuvan \nextImageCount {} migraatio funktiolla. 
Funktio käy läpi kaikki käyttäjät jolla measurableThing ominaisuus on olemassa ja päivittää sen measurableThings listaan.
%mnnm
Projektissa on tarpeeksi vähän käyttäjiä, joten migraatio tehdään synkroonisesti palvelimella. 
Jos projektissa olisi isompi määrä käyttäjiä tämä operaatio pysäyttäisi palvelimen sen ajaksi kun käyttäjä profiileja päivitettäisiin.
Isoimmilla käyttäjä määrillä tämä operaatio tehtäisiin huolto aikana, jolloin sovellus ei olisi käytössä tai asynkroonisesti, 
jolloin käyttäjiä migraoitaisiin pikkuhiljaa.
\medskip


\bigskip
Kuva \getImgCount{}. Migraatio funktio
\medskip


% en tiedä tarvitaanko tätä kuvaa. siihen pitäisi refrensoida ennen
\bigskip
Kuva \getImgCount{}. Uusi käyttäjä skeema
\medskip









\subsubsection{Käyttöliittymä}

%kappaleisiin voisi lisätä pari lausetta lisää




Käyttöliittymiä pitää muokata tukemaan ominaisuutta.
Käyttäjän luonti ja päivitys sivua pitää muokata siten, että käyttäjille voidaan antaa useita mitattavia arvoja.
Käyttäjän käyttöliittymää pitää muokata siten,
että käyttäjä voi vaihtaa mitä mitattavaa arvoa hän haluaa seurata tai mihin mitattavaan arvoon hän haluaa tallentaa lukemia.
%more
\medskip

Kuvassa \nextImageCount{} on käyttäjäpuolen käyttöliittymä muutoksien jälkeen.
Käyttöliittymässä käyttäjällä on mahdollisuus valita mihin mitattavaan suurteeseen hän haluaa tallettaa arvoja kuvan {\the\numexpr \theimgCounter + 2 } laskuvalikolla.
% more words or fix something
Sivun kaavioon on myös lisätty mahdollisuus seurata monta mitattavaa arvoa.
\medskip

\bigskip
\includegraphics[width = 15cm]{src/public/progressmulti.png}\\
Kuva \getImgCount {}. Käyttäjän käyttöliittymä, muutoksien jälkeen 
\medskip

\bigskip
\includegraphics{src/public/progressselect.png}\\
Kuva \getImgCount {}. käyttöliittymän laskkuvalikosta
\medskip



Kuvassa \nextImageCount {} on päivitetty käyttäjän luomis ja päivitys käyttöliittymä.
Käyttöliittymään on lisätty nappi, josta voi lisätä, nimetä ja poistaa mitattavia suureita käyttäjälle.
%selitä paremmin että voi uudelleen käyttää komponenttia. tarviin jonkun sanan tolle yhdistelmälle
Tekstikenttä ja poisto nappi on sisällytetty kuvan {\the\numexpr \theimgCounter + 2 } React komponenttiin "MeasurableThingElement". 
Tämä antaa mahdollisuuden lisätä uusia kenttiä, tekemällä uuden instanssin komponentista.
%

\bigskip
\includegraphics[width = 10cm]{src/public/oppar/adminUserProfilePost.png}\\
Kuva \getImgCount {}. käyttäjä luomis käyttöliittymä (cencor roles?)
\bigskip


\includegraphics[width = 15cm]{src/public/oppar/measurableElementComponent.png}\\
Kuva \getImgCount {}. Mitattava elementti komponentti
\medskip

Komponentti on tilaton funktiokomponentti johon annetaan mitattavan suurteen nimi ja poista funktio proppeina.
Poinsto funktiota kutsutaan kun painetaan punaista X nappia ja se poistaa mitattavan suurteen käyttäjän profiilista ja elementin käyttöliittymästä.
%{\the\numexpr \theimgCounter + 2 }
\medskip


\iffalse
% tämä on väärässä paikassa.  tai poistetaan kokonaan
Entisessä käyttöliittymässä kuvassa \nextImageCount {} on vain yksi teksti kenttä, josta pystyi muuttamaan measurableThing ominaisuuden nimeä.

%toinen paragraafi
\bigskip


\includegraphics[width = 10cm]{src/public/oppar/adminUserProfilePre.png}\\
Kuva \getImgCount {}. Käyttäjän luomis käyttöliittymä ennen muutoksia (cencor roles?)
\medskip

\fi









\subsection{Ominaisuuden lopputulos ja käyttöönotto}

% vaatii vähän lisää tekstiä


Käyttäjä profiilin skeeman migratointi meni onglemitta.
Riskit käyttäjien skeeman migraation epäonnistummisessa olisi voinut välttää ottamalla varmuuskopio tietokannasta ennen migraatiota.
%more 
\medskip

Ominaisuus toimi käyttöönoton jälkeen ja kaikki käyttäjät saivat ominaisuuden käyttöön.
Käyttäjät pystyi tallentamaan useamman mitattavan arvon ja näkemään tulokset kaaviossa.
Viikko ominaisuuden käyttöönoton jälkeen testiryhmältä ei tullut palautetta, että ominaisuus ei olisi toiminut.
käyttöliittymästän toiminnasta tai sen ulkonäöstä ei myöskään tullut palautetta sen käyttöönoton jälkeen.
\medskip

